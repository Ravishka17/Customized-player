<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Video Player</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      user-select: none;
    }

    .video-container {
      position: relative;
      width: 640px;
      background-color: #000;
      overflow: hidden;
    }

    video {
      width: 100%;
      display: block;
    }

    /* Progress Bar */
    .progress-bar {
      position: absolute;
      bottom: 50px;
      width: calc(100% - 30px);
      left: 15px;
      height: 5px;
      background: rgba(85, 85 , 85 ,0.5);
      cursor: pointer;
      backdrop-filter: blur(5px); /* semi-transparent background */
    }

    .progress-bar div {
      height: 100%;
      width: 0;
      background: #f39c12;
    }

    /* Bottom Controls */
    .controls {
      position: absolute;
      bottom: 5px;
      left: 15px;
      right: 15px;
      width: calc(100% - 30px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: transparent;
      color: #f39c12;
      z-index: 2;
      padding-right: 10px;
    }

    /* Hide controls initially */
    .controls, .progress-bar, .center-controls {
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .video-container.show-controls .controls,
    .video-container.show-controls .progress-bar,
    .video-container.show-controls .center-controls {
      opacity: 1;
    }

    .controls button {
      background: none;
      border: none;
      color: #f39c12;
      font-size: 25px;
      cursor: none;
    }

    .time {
      min-width: 100px;
    }

    .center-controls {
      position: absolute;
      top: 47%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      gap: 20px;
      z-index: 2;
      opacity: 1;
    }

    .center-controls button {
      background: transparent;
      border: none;
      color: #f39c12;
      font-size: 70px;
      cursor: none;
      transition: background 0.3s ease;
    }

    .center-controls button i {
      font-size: 50px;
    }

    /* Only show the play button initially */
    #rewind, #forward {
      display: none;
    }

    /* Fullscreen mode fixes */
    video:fullscreen + .controls,
    video:fullscreen + .center-controls {
      position: absolute;
      z-index: 10;
      bottom: 20px;
      left: 20px;
    }

    /* Settings menu */
    .settings-menu {
      position: absolute;
      top: 0;
      right: 15px;
      background-color: rgba(0, 0, 0, 0.8);
      color: #f39c12;
      padding: 15px;
      display: none;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }

    .settings-menu select {
      background-color: #333;
      color: #f39c12;
      border: 1px solid #f39c12;
      padding: 5px;
      font-size: 14px;
    }

    .settings-menu button {
      background: none;
      border: none;
      color: #f39c12;
      font-size: 20px;
      cursor: none;
    }

    /* Close button replaced with X mark */
    .settings-menu .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 20px;
      color: #f39c12;
      cursor: none;
    }

    .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
      color: #f39c12;
      z-index: 5;
    }

  </style>
</head>
<body>
  <div class="video-container" id="video-container">
    <video id="video" src="https://ia804603.us.archive.org/12/items/please-stand-by-video-effect_202409/SpongeBob%20SquarePants%20Season%201%20Episode%201%20Help%20Wanted%20%E2%80%93%20Reef%20Blower%20%E2%80%93%20Tea%20at%20the%20Treedome%20-%20SpongeBob%20SquarePants.mp4" type="video/mp4"></video>

    <div class="loading-spinner" id="loading-spinner" style="display: none;">
      <i class="fa-solid fa-spinner fa-spin"></i>
    </div>

    <!-- Center Play Controls -->
    <div class="center-controls" id="center-controls">
      <button id="rewind"><i class="material-icons">replay_10</i></button>
      <button id="play-pause"><i class="bi bi-play-fill"></i></button>
      <button id="forward"><i class="material-icons">forward_10</i></button>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar" id="progress-bar">
      <div id="progress"></div>
    </div>

    <!-- Bottom Controls -->
    <div class="controls">
      <button id="volume-toggle"><i class="bi bi-volume-up-fill"></i></button>
      <div class="time" id="time">00:00 / 00:00</div>
      <button id="download"><i class="bi bi-download"></i></button>
      <button id="settings"><i class="fa-solid fa-gear"></i></button>
      <button id="fullscreen"><i class="fa-solid fa-expand"></i></button>
    </div>

    <!-- Settings Menu -->
    <div class="settings-menu" id="settings-menu">
      <!-- X mark close button -->
      <span class="close-btn" id="close-settings"><i class="fa-solid fa-xmark"></i></span>

      <label for="quality">Quality</label>
      <select id="quality">
        <option value="1080p">1080p</option>
        <option value="720p">720p</option>
        <option value="480p">480p</option>
      </select>

      <label for="speed">Playback Speed</label>
      <select id="speed">
        <option value="1.0">Normal (1x)</option>
        <option value="1.5">1.5x</option>
        <option value="2.0">2x</option>
        <option value="0.5">0.5x</option>
      </select>

      <label for="subtitles">Subtitles</label>
      <select id="subtitles">
        <option value="none">None</option>
        <option value="english">English</option>
        <option value="spanish">Spanish</option>
      </select>
    </div>
  </div>

  <script>
    const video = document.getElementById('video');
    const playPauseButton = document.getElementById('play-pause');
    const rewindButton = document.getElementById('rewind');
    const forwardButton = document.getElementById('forward');
    const progressBar = document.getElementById('progress-bar');
    const progress = document.getElementById('progress');
    const fullscreenButton = document.getElementById('fullscreen');
    const timeDisplay = document.getElementById('time');
    const volumeToggleButton = document.getElementById('volume-toggle');
    const videoContainer = document.getElementById('video-container');
    const settingsButton = document.getElementById('settings');
    const settingsMenu = document.getElementById('settings-menu');
    const closeSettingsButton = document.getElementById('close-settings');
    const qualitySelect = document.getElementById('quality');
    const speedSelect = document.getElementById('speed');
    const subtitlesSelect = document.getElementById('subtitles');
    const loadingSpinner = document.getElementById('loading-spinner');
    const centerControls = document.getElementById('center-controls');

    let controlsVisible = false;
    let controlsTimeout;
    let firstPlay = true;

    // Function to show controls
    const showControls = () => {
      videoContainer.classList.add('show-controls');
      centerControls.style.opacity = 1;
      controlsVisible = true;

      // Reset auto-hide timeout
      clearTimeout(controlsTimeout);
      if (!video.paused) {
        controlsTimeout = setTimeout(hideControls, 3000); // Auto-hide after 3 seconds
      }
    };

    // Function to hide controls
    const hideControls = () => {
      if (video.paused) return; // Keep controls visible when the video is paused
      videoContainer.classList.remove('show-controls');
      centerControls.style.opacity = 0;
      controlsVisible = false;
    };

    // Function to detect if developer tools are open
    const detectDevTools = () => {
      const devtools = /./;
      devtools.toString = function() {
        debugger;
        return 'devtools';
      };
      console.log('%c', devtools);
    };

    // Call the detectDevTools function periodically
    setInterval(detectDevTools, 1000);

    // Toggle controls visibility on click or touch
    videoContainer.addEventListener('click', (event) => {
      // Prevent toggling if the click is on a control button or menu
      if (event.target.closest('.controls') || event.target.closest('.center-controls') || event.target.closest('.settings-menu')) {
        return;
      }
      if (controlsVisible) {
        hideControls();
      } else {
        showControls();
      }
    });

    // Ensure play/pause buttons reappear on pause
    video.addEventListener('pause', () => {
      showControls();
      centerControls.style.opacity = 1;
      rewindButton.style.display = 'block';
      forwardButton.style.display = 'block';
    });

    // Ensure controls disappear on play
    video.addEventListener('play', () => {
      hideControls();
      rewindButton.style.display = 'block';
      forwardButton.style.display = 'block';
    });

    // Play/Pause functionality
    playPauseButton.addEventListener('click', (event) => {
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      if (firstPlay) {
        video.play();
        playPauseButton.innerHTML = '<i class="bi bi-pause-fill"></i>';
        firstPlay = false;
      } else {
        if (!controlsVisible) {
          showControls();
        } else {
          if (video.paused) {
            video.play();
            playPauseButton.innerHTML = '<i class="bi bi-pause-fill"></i>';
          } else {
            video.pause();
            playPauseButton.innerHTML = '<i class="bi bi-play-fill"></i>';
          }
        }
      }
    });

    // Show loading spinner when the video is buffering/loading
    video.addEventListener('waiting', () => {
      loadingSpinner.style.display = 'block';
      playPauseButton.style.display = 'none';
    });

    // Hide loading spinner and show play/pause button when the video starts playing
    video.addEventListener('playing', () => {
      loadingSpinner.style.display = 'none';
      playPauseButton.style.display = 'block';
    });

    // Rewind functionality
    rewindButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      video.currentTime -= 10;
    });

    // Forward functionality
    forwardButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      video.currentTime += 10;
    });

    // Update progress bar and time
    video.addEventListener('timeupdate', () => {
      const currentTime = Math.floor(video.currentTime);
      const duration = Math.floor(video.duration);
      progress.style.width = `${(currentTime / duration) * 100}%`;

      const formatTime = (time) => {
        const minutes = Math.floor(time / 60).toString().padStart(2, '0');
        const seconds = (time % 60).toString().padStart(2, '0');
        return `${minutes}:${seconds}`;
      };
      timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
    });

    // Volume toggle functionality
    volumeToggleButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      video.muted = !video.muted;
      volumeToggleButton.innerHTML = video.muted ? '<i class="bi bi-volume-mute-fill"></i>' : '<i class="bi bi-volume-up-fill"></i>';
    });

    // Quality selection functionality
    qualitySelect.addEventListener('change', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      const quality = qualitySelect.value;
      console.log(`Quality changed to: ${quality}`);
    });

    // Playback speed functionality
    speedSelect.addEventListener('change', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      const speed = parseFloat(speedSelect.value);
      video.playbackRate = speed;
      console.log(`Playback speed changed to: ${speed}x`);
    });

    // Subtitles functionality
    subtitlesSelect.addEventListener('change', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      const subtitle = subtitlesSelect.value;
      if (subtitle === 'none') {
        video.textTracks[0].mode = 'disabled';
      } else {
        video.textTracks[0].mode = 'showing';
        console.log(`Subtitles changed to: ${subtitle}`);
      }
    });

    // Fullscreen button functionality
    fullscreenButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      if (!document.fullscreenElement) {
        enterFullscreen();
      } else {
        exitFullscreen();
      }
    });

    // Settings button to toggle settings menu visibility
    settingsButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      settingsMenu.style.display = settingsMenu.style.display === 'flex' ? 'none' : 'flex';
    });

    // Close settings menu
    closeSettingsButton.addEventListener('click', (event) => {
      if (!controlsVisible) {
        showControls();
        return;
      }
      event.stopPropagation(); // Prevent click event from propagating to videoContainer
      settingsMenu.style.display = 'none';
    });

    // Enter fullscreen and lock orientation to landscape
    function enterFullscreen() {
      if (videoContainer.requestFullscreen) {
        videoContainer.requestFullscreen();
      } else if (videoContainer.mozRequestFullScreen) {
        videoContainer.mozRequestFullScreen();
      } else if (videoContainer.webkitRequestFullscreen) {
        videoContainer.webkitRequestFullscreen();
      } else if (videoContainer.msRequestFullscreen) {
        videoContainer.msRequestFullscreen();
      }

      if (screen.orientation && screen.orientation.lock) {
        screen.orientation.lock('landscape').catch(function (error) {
          console.log('Orientation lock failed: ', error);
        });
      }

      fullscreenButton.innerHTML = '<i class="fa-solid fa-compress"></i>';
    }

    // Exit fullscreen and unlock orientation
    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }

      fullscreenButton.innerHTML = '<i class="fa-solid fa-expand"></i>';
    }

    // Handle fullscreen change to update the icon
    document.addEventListener('fullscreenchange', function () {
      if (!document.fullscreenElement) {
        fullscreenButton.innerHTML = '<i class="fa-solid fa-expand"></i>';
      } else {
        fullscreenButton.innerHTML = '<i class="fa-solid fa-compress"></i>';
      }
    });

    // Show controls when touching center controls, bottom controls, or progress bar
    centerControls.addEventListener('click', showControls);
    progressBar.addEventListener('click', showControls);
    document.querySelectorAll('.controls button').forEach(button => {
      button.addEventListener('click', showControls);
    });

    // Prevent right-click
    document.getElementById('video-container').addEventListener('contextmenu', (e) => {
    e.preventDefault();
});     
  </script>
</body>
</html>